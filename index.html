<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>LatAm Nearshore ROI — Apperturio</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root{
      --yellow:#FFE91F;
      --black:#0b0b0b;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#fbfcfd;
      --glass: rgba(11,11,11,0.04);
      --radius:14px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color:var(--black);
      padding:28px;
    }

    .wrap{
      max-width:980px;
      margin:20px auto;
      background:var(--card);
      border-radius:var(--radius);
      padding:28px;
      box-shadow:0 8px 30px rgba(11,11,11,0.06);
      border:1px solid rgba(11,11,11,0.04);
    }

    header{display:flex;align-items:center;gap:16px}
    .logo{
      width:52px;height:52px;border-radius:10px;background:var(--yellow);
      display:flex;align-items:center;justify-content:center;
      font-weight:700;color:var(--black);
      box-shadow:0 4px 12px rgba(11,11,11,0.08);
      flex:0 0 52px;
      font-size:20px;
    }
    h1{margin:0;font-size:20px;line-height:1.05}
    p.lead{margin:6px 0 0;color:var(--muted);font-size:13px}

    .grid{
      display:grid;
      grid-template-columns:repeat(12,1fr);
      gap:16px;
      margin-top:18px;
    }

    .card{
      background:linear-gradient(180deg,#ffffff,#fafafa);
      padding:16px;border-radius:12px;border:1px solid var(--glass);
    }

    .col-7{grid-column:span 7}
    .col-5{grid-column:span 5}
    @media (max-width:880px){.col-7,.col-5{grid-column:span 12}}

    label{display:block;font-weight:600;margin-bottom:6px;font-size:13px}
    input[type="text"], input[type="number"], select {
      width:100%;padding:10px 12px;border-radius:10px;border:1px solid #e6e7eb;font-size:14px;
      background:white;
    }

    .small{font-size:12px;color:var(--muted)}

    .results{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:12px;margin-top:18px;
    }
    @media (max-width:880px){.results{grid-template-columns:1fr}}

    .result{
      background:#fff;padding:14px;border-radius:10px;border:1px solid var(--glass);
      text-align:left;
    }
    .result h4{margin:0;font-size:12px;color:var(--muted)}
    .result .big{margin-top:6px;font-size:20px;font-weight:700}

    .btn{
      background:var(--black);color:white;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:600
    }
    .btn.ghost{background:transparent;border:1px solid var(--glass);color:var(--black)}
    .btn.yellow{background:var(--yellow);color:var(--black)}

    .adv{margin-top:12px;padding:12px;border-radius:10px;border:1px dashed rgba(11,11,11,0.05);background:#fff}
    .toggle{font-size:13px;color:var(--muted);cursor:pointer;text-decoration:underline;border:none;background:none;padding:0}

    .chartWrap{
      margin-top:18px;padding:12px;border-radius:12px;background:#fff;border:1px solid var(--glass)
    }

    .note{font-size:12px;color:var(--muted);margin-top:8px}
  </style>
</head>
<body>

  <div class="wrap">
    <header>
      <div class="logo">A</div>
      <div>
        <h1>LatAm Nearshore ROI Calculator</h1>
        <p class="lead">Auto-filled LatAm assumptions so clients don’t need to guess.</p>
      </div>
    </header>

    <div class="grid">
      <!-- INPUTS -->
      <div class="col-7 card">
        <label for="role">Role</label>
        <select id="role">
          <option value="Software Engineer">Software Engineer</option>
          <option value="Frontend / React">Frontend / React</option>
          <option value="Backend / Python / Node">Backend / Python / Node</option>
          <option value="DevOps">DevOps</option>
          <option value="AI / ML Engineer">AI / ML Engineer</option>
          <option value="Designer (UI/UX)">Designer (UI/UX)</option>
          <option value="SDR">SDR</option>
          <option value="PM / PMM">PM / PMM</option>
          <option value="Customer Support">Customer Support</option>
        </select>

        <div style="display:flex;gap:12px;margin-top:12px">
          <div style="flex:1">
            <label for="usSalary">US salary (USD)</label>
            <input id="usSalary" type="number" value="140000" />
          </div>
          <div style="width:130px">
            <label for="hires"># hires</label>
            <input id="HiRes" type="number" id="hires" value="1" />
            <input id="hires" type="number" value="1"/>
          </div>
        </div>

        <div style="display:flex;gap:12px;margin-top:12px">
          <div style="flex:1">
            <label for="latamSalary">LatAm salary (auto-filled, editable)</label>
            <input id="latamSalary" type="number"/>
            <div class="small" style="margin-top:6px">This updates automatically when you change roles.</div>
          </div>
          <div style="width:170px">
            <label for="usBenefits">US benefits %</label>
            <input id="usBenefits" type="number" value="25" />
          </div>
        </div>

        <div class="adv" id="advancedPanel" style="display:none">
          <div style="display:flex;gap:12px">
            <div style="flex:1">
              <label for="latamBenefits">LatAm benefits (%)</label>
              <input id="latamBenefits" type="number" value="20" />
            </div>
            <div style="width:170px">
              <label for="latamTime">LatAm time-to-hire (weeks)</label>
              <input id="latamTime" type="number" value="3" />
            </div>
            <div style="width:170px">
              <label for="usTime">US time-to-hire (weeks)</label>
              <input id="usTime" type="number" value="6" />
            </div>
          </div>
        </div>

        <div style="margin-top:14px;display:flex;align-items:center;gap:10px">
          <button id="advToggle" class="toggle">Show advanced</button>
        </div>
      </div>

      <!-- RESULTS -->
      <div class="col-5 card">
        <h3 style="margin:0;font-size:16px">Results</h3>
        <div class="results">
          <div class="result">
            <h4>Annual Savings</h4>
            <div class="big" id="annualSavings">$0</div>
          </div>

          <div class="result">
            <h4>CoV Saved</h4>
            <div class="big" id="covSaved">$0</div>
          </div>

          <div class="result">
            <h4>ROI %</h4>
            <div class="big" id="roiPct">0%</div>
          </div>
        </div>

        <div class="chartWrap">
          <canvas id="mainChart" height="120"></canvas>
        </div>

      </div>
    </div>
  </div>

  <script>
    /**********************
     * LatAm DEFAULT salary table
     **********************/
    const LATAM_DEFAULTS = {
      "Software Engineer": 45000,
      "Frontend / React": 40000,
      "Backend / Python / Node": 45000,
      "DevOps": 60000,
      "AI / ML Engineer": 60000,
      "Designer (UI/UX)": 28000,
      "SDR": 16000,
      "PM / PMM": 45000,
      "Customer Support": 15000
    };

    // ELEMENTS
    const roleEl = document.getElementById("role");
    const usSalaryEl = document.getElementById("usSalary");
    const hiresEl = document.getElementById("hires");
    const latamSalaryEl = document.getElementById("latamSalary");
    const usBenefitsEl = document.getElementById("usBenefits");
    const latamBenefitsEl = document.getElementById("latamBenefits");
    const latamTimeEl = document.getElementById("latamTime");
    const usTimeEl = document.getElementById("usTime");
    const advToggle = document.getElementById("advToggle");
    const advancedPanel = document.getElementById("advancedPanel");

    const annualSavingsEl = document.getElementById("annualSavings");
    const covSavedEl = document.getElementById("covSaved");
    const roiPctEl = document.getElementById("roiPct");

    // CHART SETUP
    const ctx = document.getElementById("mainChart").getContext("2d");
    let chart;

    function initChart(a=0,b=0,c=0){
      if(chart) chart.destroy();
      chart = new Chart(ctx,{
        type:"bar",
        data:{
          labels:["Annual Savings","CoV Saved","LatAm Cost"],
          datasets:[{
            data:[a,b,c],
            backgroundColor:["#FFE91F","#FFE04A","#6B7280"],
            borderRadius:6
          }]
        },
        options:{
          responsive:true,
          plugins:{legend:{display:false}},
          scales:{y:{beginAtZero:true}}
        }
      });
    }

    // FORMATTING
    const usd = n => "$" + Math.round(n).toLocaleString();

    /**********************************
     FIXED: AUTO-FILL LATAM SALARY
    **********************************/
    function autoFillLatam(){
      const role = roleEl.value;
      const defaultValue = LATAM_DEFAULTS[role];

      if (!latamSalaryEl.value || Number(latamSalaryEl.value) <= 0){
        latamSalaryEl.value = defaultValue;
        return;
      }

      // If user hasn't manually changed & it matches ANY default, update
      const current = Number(latamSalaryEl.value);
      const defaults = Object.values(LATAM_DEFAULTS);
      if(defaults.includes(current)){
        latamSalaryEl.value = defaultValue;
      }
    }

    /**********************************
     CALCULATE
    **********************************/
    function calculate(){
      autoFillLatam();

      const hires = Number(hiresEl.value || 1);
      const usSalary = Number(usSalaryEl.value || 0);
      const latamSalary = Number(latamSalaryEl.value || 0);

      const usBenefits = Number(usBenefitsEl.value || 25) / 100;
      const latamBenefits = Number(latamBenefitsEl.value || 20) / 100;

      const usTime = Number(usTimeEl.value || 6);
      const latamTime = Number(latamTimeEl.value || 3);

      const totalUS = (usSalary * (1 + usBenefits)) * hires;
      const totalLatam = (latamSalary * (1 + latamBenefits)) * hires;

      const annualSavings = totalUS - totalLatam;

      const revenueImpact = usSalary * 2;
      const dailyCov = revenueImpact / 250;
      const daysSaved = (usTime - latamTime) * 5;
      const covSaved = daysSaved * dailyCov * hires;

      const roi = totalLatam>0 ? ((annualSavings + covSaved)/totalLatam)*100 : 0;

      annualSavingsEl.textContent = usd(annualSavings);
      covSavedEl.textContent = usd(covSaved);
      roiPctEl.textContent = roi.toFixed(1)+"%";

      initChart(annualSavings,covSaved,totalLatam);
    }

    /**********************************
     EVENTS
    **********************************/
    roleEl.addEventListener("change",calculate);
    [usSalaryEl,hiresEl,latamSalaryEl,usBenefitsEl,latamBenefitsEl,latamTimeEl,usTimeEl]
      .forEach(el=>el.addEventListener("input",calculate));

    // ADVANCED PANEL
    advToggle.addEventListener("click",()=>{
      advancedPanel.style.display = advancedPanel.style.display==="none" ? "block" : "none";
      advToggle.textContent = advancedPanel.style.display==="none"
        ? "Show advanced"
        : "Hide advanced";
    });

    /**********************************
     INIT
    **********************************/
    (function init(){
      latamSalaryEl.value = LATAM_DEFAULTS[roleEl.value];
      latamBenefitsEl.value = 20;
      latamTimeEl.value = 3;
      usTimeEl.value = 6;

      initChart(0,0,0);
      calculate();
    })();
  </script>

</body>
</html>
